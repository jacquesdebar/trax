(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a(22)},18:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(5),r=a.n(l),i=(a(18),a(3),a(6),a(7)),c=a(8),m=a(11),o=a(9),u=a(12),d=a(1),p=a(2),y=["user-top-read","user-read-currently-playing","user-read-playback-state"],h=window.location.hash.substring(1).split("&").reduce(function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e},{});window.location.hash="";var g=h,E=(a(21),a(10)),v=function(e){var t=Object(n.useState)(0),a=Object(E.a)(t,2),l=a[0],r=a[1];return Object(n.useEffect)(function(){fetch("https://api.spotify.com/v1/artists/".concat(e.item.artists[0].id),{headers:{Authorization:"Bearer ".concat(e.token)}}).then(function(e){return e.json()}).then(function(e){return r(e.popularity)})}),s.a.createElement("tr",null,s.a.createElement("td",null,e.item.artists[0].name),s.a.createElement("td",null,e.item.name),s.a.createElement("td",null,e.item.album_type),s.a.createElement("td",null,l))},f=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(o.a)(t).call(this))).state={token:null,item:{album:{images:[{url:""}]},name:"",artists:[{name:""}],duration_ms:0},is_playing:"Paused",progress_ms:0,newReleases:{items:[{album_type:"",artists:[{name:"",id:"",popularity:0}],href:"",id:"",images:[{url:""}],name:""}],offset:0,total:0},recents:[{track:{album:{name:"",images:[{url:""}]},name:"",artists:[{name:"",id:""}],duration_ms:0,explicit:!1},played_at:""}],topArtists:{items:[{name:"",popularity:0,genre:""}],total:0,limit:0},topTracks:{items:[{name:"",album:{artists:[{name:""}]}}],total:0,limit:0}},e.getCurrentlyPlaying=e.getCurrentlyPlaying.bind(Object(d.a)(Object(d.a)(e))),e.getRecentlyPlayed=e.getRecentlyPlayed.bind(Object(d.a)(Object(d.a)(e))),e.getMostPlayedArtists=e.getMostPlayedArtists.bind(Object(d.a)(Object(d.a)(e))),e.getNewReleases=e.getNewReleases.bind(Object(d.a)(Object(d.a)(e))),e.getMostPlayedTracks=e.getMostPlayedTracks.bind(Object(d.a)(Object(d.a)(e))),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=g.access_token;e&&(this.setState({token:e}),this.getRecentlyPlayed(e),this.getMostPlayedArtists(e),this.getNewReleases(e),this.getMostPlayedTracks(e))}},{key:"getCurrentlyPlaying",value:function(e){var t=this;p.ajax({url:"https://api.spotify.com/v1/me/player/currently-playing",type:"GET",beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+e)},success:function(e){t.setState({item:e.item,is_playing:e.is_playing,progress_ms:e.progress_ms})}})}},{key:"getNewReleases",value:function(e){var t=this;p.ajax({url:"https://api.spotify.com/v1/browse/new-releases?country=US&limit=50",type:"GET",beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+e)},success:function(e){t.setState({newReleases:e.albums})}})}},{key:"getRecentlyPlayed",value:function(e){var t=this;p.ajax({url:"https://api.spotify.com/v1/me/player/recently-played",type:"GET",beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+e)},success:function(e){t.setState({recents:e.items})}})}},{key:"getMostPlayedArtists",value:function(e){var t=this;p.ajax({url:"https://api.spotify.com/v1/me/top/artists?time_range=medium_term&limit=50",type:"GET",beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+e)},success:function(e){t.setState({topArtists:e})}})}},{key:"getMostPlayedTracks",value:function(e){var t=this;p.ajax({url:"https://api.spotify.com/v1/me/top/tracks?time_range=long_term&limit=50",type:"GET",beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+e)},success:function(e){t.setState({topTracks:e})}})}},{key:"render",value:function(){var e=this;console.log(this.state.topTracks);var t=function(e){for(var t={singles:[],albums:[],compilations:[]},a=0;a<e.length;a++)"single"===e[a].album_type?t.singles.push(e[a]):"album"===e[a].album_type?t.albums.push(e[a]):t.compilations.push(e[a]);return t},a=this.state.topArtists.items;this.state.topArtists.items;return s.a.createElement("div",{className:"overall"},this.state.token?s.a.createElement("div",{className:"loggedIn"},s.a.createElement("div",{className:"newReleases"},s.a.createElement("h2",null,"New Releases"),s.a.createElement("div",{className:"split"},s.a.createElement("div",{className:"newSingles"},s.a.createElement("h3",null,"Singles"),s.a.createElement("div",{className:"newContent"},t(this.state.newReleases.items).singles.map(function(e){return s.a.createElement("div",{className:"newDrop-block",key:e.id},s.a.createElement("div",{className:"newDrop-img"},s.a.createElement("img",{src:e.images[0].url,alt:e.name})),s.a.createElement("div",{className:"newDrop-info"},s.a.createElement("div",{className:"newDrop-name"},e.name),s.a.createElement("div",{className:"newDrop-artist"},e.artists[0].name),s.a.createElement("div",{className:"newDrop-type"},e.album_type)))}))),s.a.createElement("div",{className:"newAlbums"},s.a.createElement("h3",null,"Albums / EPs"),s.a.createElement("div",{className:"newContent"},t(this.state.newReleases.items).albums.map(function(e){return s.a.createElement("div",{className:"newDrop-block",key:e.id},s.a.createElement("div",{className:"newDrop-img"},s.a.createElement("img",{src:e.images[0].url,alt:e.name})),s.a.createElement("div",{className:"newDrop-info"},s.a.createElement("div",{className:"newDrop-name"},e.name),s.a.createElement("div",{className:"newDrop-artist"},e.artists[0].name),s.a.createElement("div",{className:"newDrop-type"},e.album_type)))})))),s.a.createElement("div",null,s.a.createElement("h2",{style:{paddingTop:50}},"Collected"),s.a.createElement("table",{style:{width:"100%"}},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Artist"),s.a.createElement("th",null,"Name"),s.a.createElement("th",null,"Type"),s.a.createElement("th",null,"Popularity"))),s.a.createElement("tbody",null,this.state.newReleases.items.map(function(t){return s.a.createElement(v,{key:t.id,item:t,token:e.state.token})}))))),s.a.createElement("div",{className:"recents"},s.a.createElement("h2",null,"My recently played"),this.state.recents.map(function(e){return s.a.createElement("div",{className:"example",key:"".concat(e.track.name,"_").concat(e.track.artists[0].name,"_").concat(e.played_at)},s.a.createElement("div",{className:"recent-img"},s.a.createElement("img",{src:e.track.album.images[0].url,alt:e.track.name})),s.a.createElement("div",{className:"recent-under"},s.a.createElement("div",{className:"recent-name"},e.track.name),s.a.createElement("div",{className:"recent-artist"},e.track.artists[0].name),s.a.createElement("div",{className:"recent-album"},e.track.album.name)))})),s.a.createElement("div",{className:"myList"},s.a.createElement("div",{style:{width:400,marginLeft:"auto",marginRight:"auto"}},s.a.createElement("h2",null,"My most listened:"),s.a.createElement("ol",null,a.map(function(e){return s.a.createElement("li",{key:e.name},"".concat(e.name,": ").concat(e.popularity))})))),s.a.createElement("div",{className:"myList"},s.a.createElement("div",{style:{width:400,marginLeft:"auto",marginRight:"auto"}},s.a.createElement("h2",null,"My top tracks:"),s.a.createElement("ol",null,this.state.topTracks.items.map(function(e){return s.a.createElement("li",{key:e.name},"".concat(e.album.artists[0].name," - ").concat(e.name))}))))):s.a.createElement("div",{className:"loggedOut"},s.a.createElement("div",{style:{height:"40vh"}}),s.a.createElement("a",{className:"btn btn--loginApp-link",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("d5f22ea76578426aa53c0e54cd4bbff7","&redirect_uri=").concat("http://localhost:3000/redirect","&scope=").concat(y.join("%20"),"&response_type=token&show_dialog=true")},"Login to Spotify")))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,1,2]]]);
//# sourceMappingURL=main.d7c06179.chunk.js.map